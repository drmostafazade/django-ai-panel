{% extends 'base.html' %}
{% block title %}تنظیمات GitHub{% endblock %}

{% block content %}
<h1>تنظیمات GitHub</h1>

<div class="module">
    <h2>توکن دسترسی شخصی</h2>
    <div class="module-content">
        <form method="post">
            {% csrf_token %}
            <div class="form-row">
                {{ form.token.label_tag }}
                {{ form.token }}
                <div class="help-text">
                    {{ form.token.help_text|safe }}
                </div>
            </div>
            
            <input type="submit" value="ذخیره توکن">
            
            {% if token %}
            <a href="{% url 'git_integration:repositories' %}" class="button secondary">
                مشاهده مخازن
            </a>
            {% endif %}
        </form>
        
        {% if token %}
        <div class="message success" style="margin-top: 20px;">
            توکن قبلاً ذخیره شده است. برای تغییر، توکن جدید وارد کنید.
        </div>
        {% endif %}
    </div>
</div>

<div class="module">
    <h2>راهنمای دریافت توکن</h2>
    <div class="module-content">
        <ol>
            <li>به <a href="https://github.com/settings/tokens" target="_blank">GitHub Settings → Developer settings → Personal access tokens</a> بروید</li>
            <li>روی "Generate new token (classic)" کلیک کنید</li>
            <li>نام دلخواه برای توکن انتخاب کنید</li>
            <li>حداقل دسترسی <code>repo</code> را انتخاب کنید</li>
            <li>روی "Generate token" کلیک کنید</li>
            <li>توکن را کپی و در فرم بالا وارد کنید</li>
        </ol>
    </div>
</div>
{% endblock %}
