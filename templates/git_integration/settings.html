{% extends 'base/base.html' %}
{% block title %}تنظیمات GitHub{% endblock %}

{% block content %}
<div class="container">
    <div class="page-header">
        <h1 class="page-title">تنظیمات GitHub</h1>
        <p class="page-subtitle">توکن دسترسی شخصی خود را پیکربندی کنید</p>
    </div>
    
    <div class="form-container">
        <div class="form-card">
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="action" value="save_token">
                
                <div class="form-group">
                    <label class="form-label" for="github_token">
                        GitHub Personal Access Token
                    </label>
                    <input type="password" 
                           id="github_token" 
                           name="github_token" 
                           class="form-input"
                           placeholder="ghp_xxxxxxxxxxxx"
                           {% if token %}value="توکن ذخیره شده است"{% endif %}>
                    <div class="form-help">
                        <a href="https://github.com/settings/tokens/new" target="_blank" style="color: var(--primary);">
                            دریافت توکن جدید از GitHub →
                        </a>
                    </div>
                </div>
                
                <div style="display: flex; gap: 12px;">
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-save"></i>
                        ذخیره توکن
                    </button>
                    {% if token %}
                    <button type="button" class="btn btn-outline" onclick="testConnection()">
                        <i class="bi bi-wifi"></i>
                        تست اتصال
                    </button>
                    {% endif %}
                </div>
            </form>
            
            {% if token %}
            <hr style="margin: 24px 0; border: none; border-top: 1px solid var(--border);">
            
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="action" value="sync_repos">
                <button type="submit" class="btn btn-outline">
                    <i class="bi bi-arrow-repeat"></i>
                    همگام‌سازی مخازن
                </button>
            </form>
            {% endif %}
        </div>
    </div>
</div>

<script>
function testConnection() {
    alert('در حال تست اتصال...');
}
</script>
{% endblock %}
