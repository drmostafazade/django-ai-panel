{% extends 'base.html' %}
{% block title %}Ù…Ø®Ø§Ø²Ù† Ù…Ù†{% endblock %}

{% block content %}
<h1>Ù…Ø®Ø§Ø²Ù† Ù…Ù†</h1>

<div style="margin-bottom: 20px;">
    <form method="post" style="display: inline;">
        {% csrf_token %}
        <input type="hidden" name="sync" value="1">
        <input type="submit" value="ğŸ”„ Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§ GitHub" class="button">
    </form>
    <a href="{% url 'git_integration:settings' %}" class="button secondary">ØªÙ†Ø¸ÛŒÙ…Ø§Øª</a>
</div>

<div class="module">
    <h2>Ù„ÛŒØ³Øª Ù…Ø®Ø§Ø²Ù† ({{ repos.count }})</h2>
    <div class="module-content">
        {% if repos %}
        <table>
            <thead>
                <tr>
                    <th>Ù†Ø§Ù…</th>
                    <th>ØªÙˆØ¶ÛŒØ­Ø§Øª</th>
                    <th>ÙˆØ¶Ø¹ÛŒØª</th>
                    <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                </tr>
            </thead>
            <tbody>
                {% for repo in repos %}
                <tr>
                    <td><strong>{{ repo.name }}</strong></td>
                    <td>{{ repo.description|default:"-" }}</td>
                    <td>
                        {% if repo.is_active %}
                            <span style="color: green;">âœ… ÙØ¹Ø§Ù„</span>
                        {% else %}
                            <span style="color: gray;">â­• ØºÛŒØ±ÙØ¹Ø§Ù„</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if repo.html_url %}
                        <a href="{{ repo.html_url }}" target="_blank">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¯Ø± GitHub</a>
                        {% else %}
                        <a href="https://github.com/drmostafazade/{{ repo.name }}" target="_blank">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¯Ø± GitHub</a>
                        {% endif %}
                        |
                        <form method="post" style="display: inline;">
                            {% csrf_token %}
                            <input type="hidden" name="toggle" value="1">
                            <input type="hidden" name="repo_id" value="{{ repo.id }}">
                            <button type="submit" style="background: none; border: none; color: blue; cursor: pointer;">
                                {% if repo.is_active %}ØºÛŒØ±ÙØ¹Ø§Ù„{% else %}ÙØ¹Ø§Ù„{% endif %}
                            </button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p>Ù‡ÛŒÚ† Ù…Ø®Ø²Ù†ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯. Ø±ÙˆÛŒ "Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§ GitHub" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
