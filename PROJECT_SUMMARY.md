# خلاصه وضعیت و نقشه راه پروژه پنل هوشمند

## خلاصه و وضعیت فعلی (تاریخ: 2025-07-12)
پروژه با موفقیت تمام مراحل اولیه و رفع خطا را پشت سر گذاشته و به یک پلتفرم پایدار رسیده است. قابلیت‌های زیر در حال حاضر به درستی کار می‌کنند:
- **سیستم احراز هویت:** کاربران می‌توانند از طریق صفحه `/login` وارد و خارج شوند.
- **داشبورد اصلی:** یک صفحه داشبورد اولیه به عنوان صفحه اصلی پس از ورود وجود دارد.
- **قالب پایه:** یک قالب اصلی (`base.html`) با سایدبار برای ناوبری یکپارچه در تمام صفحات استفاده می‌شود.
- **مدیریت API (UI):** رابط کاربری پیشرفته و چندمرحله‌ای برای افزودن API Key ها پیاده‌سازی شده است.
- **چت هوشمند (Backend):** بک‌اند چت هوشمند به طور کامل پیاده‌سازی شده و قابلیت فراخوانی واقعی API های OpenAI و Claude را دارد.

---

## تاریخچه و مشکلات کلیدی حل شده
در طول راه‌اندازی، با مشکلات فنی متعددی مواجه شدیم که با موفقیت حل شدند:
1.  **خطاهای مایگریشن (`NodeNotFoundError`):** به دلیل وجود اپ‌های قدیمی، مایگریشن‌ها با تداخل مواجه بودند که با پاکسازی کامل حل شد.
2.  **خطای دسترسی (`Permission denied`):** کاربر وب‌سرور (`www-data`) اجازه خواندن فایل‌های پروژه را نداشت که با اصلاح مالکیت (`chown`) و سطح دسترسی (`chmod`) فایل‌ها برطرف گردید.
3.  **خطای اجرا (`203/EXEC`):** به دلیل محدود کردن بیش از حد دسترسی‌ها، فایل‌های اجرایی محیط مجازی (`venv/bin`) قابلیت اجرا را از دست داده بودند که با `chmod +x` اصلاح شد.
4.  **خطای پیکربندی جنگو (`ImproperlyConfigured`):** به دلیل وجود نام‌های تکراری در `INSTALLED_APPS` رخ داده بود که با اصلاح `settings.py` حل شد.
5.  **خطای `AttributeError` در `views.py`:** به دلیل ناهماهنگی نام ویو در `urls.py` و `views.py` بود که با اصلاح فایل ویو برطرف شد.
6.  **خطاهای JavaScript در فرانت‌اند:** خطاهای `SyntaxError` و `ReferenceError` که مانع از کارکرد صحیح UI می‌شدند، با اصلاح کد جاوا اسکریپت در تمپلیت‌ها حل شدند.

---

## ساختار پروژه و مسیرهای کلیدی
- **ریشه پروژه:** `/var/www/bsepar_panel`
- **اپلیکیشن‌های اصلی:**
    - `core`: برای مدل‌های اصلی و مرکزی (در حال حاضر خالی است).
    - `api_manager`: برای مدیریت کامل API Key ها (مدل‌ها، ویوها، سرویس‌ها).
    - `ai_chat`: برای چت‌پنل هوشمند.
    - `dashboard`: برای صفحه داشبورد اصلی.
    - `users`: برای مدیریت ورود و خروج کاربران.
- **URL های اصلی:**
    - `/login/`: صفحه ورود
    - `/`: داشبورد
    - `/ai-chat/`: چت هوشمند
    - `/api-manager/settings/`: صفحه مدیریت API

---

## فازهای آینده (نقشه راه)

### فاز ۵: بهینه‌سازی سرعت (فوری‌ترین نیاز بعدی)
- **هدف:** حل مشکل کندی سرعت در پاسخ‌دهی چت و بارگذاری صفحات.
- **راهکارها:**
    1.  **بهینه‌سازی سمت سرور:** استفاده از `select_related` در کوئری‌های دیتابیس برای کاهش تعداد فراخوانی‌ها.
    2.  **بهینه‌سازی سمت کلاینت:** انتقال تگ‌های `<script>` به انتهای `<body>` برای افزایش "سرعت درک شده" (Perceived Speed).
    3.  **(مهم‌ترین بهبود) پیاده‌سازی پاسخ‌های جریانی (Streaming Responses):** تغییر ساختار بک‌اند و فرانت‌اند برای دریافت و نمایش پاسخ AI به صورت کلمه به کلمه، مشابه ChatGPT.

### فاز ۶: تکمیل قابلیت‌های مدیریتی
- **هدف:** تکمیل صفحه مدیریت API.
- **راهکارها:**
    1.  پیاده‌سازی منطق دکمه‌های "فعال/غیرفعال کردن" و "حذف" برای کلیدهای ذخیره شده.
    2.  نمایش آمار مصرف توکن‌ها برای هر کلید.

### فاز ۷: دستیار عملیاتی (Actionable AI)
- **هدف:** تبدیل هوش مصنوعی از یک پاسخ‌دهنده به یک دستیار اجرایی.
- **راهکارها:**
    1.  **پیاده‌سازی بک‌اند "اجرای کوئری":** ایجاد یک API Endpoint امن که کدهای کوئری Django ORM را دریافت، اجرا و نتیجه را در قالب JSON برگرداند.
    2.  **پیاده‌سازی بک‌اند "ذخیره در فایل":** ایجاد یک API Endpoint امن که یک قطعه کد و یک مسیر فایل دریافت کرده و آن کد را به انتهای فایل مورد نظر اضافه کند.
